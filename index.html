<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minu portfell - Swedbank</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --swed-orange: #ee7023;
            --swed-yellow: #ffcc00;
            --bg-cream: #fbf8f1;
            --text-dark: #333;
            --link-blue: #00768e;
            --footer-text: #666;
        }

        body { font-family: Arial, sans-serif; background-color: var(--bg-cream); margin: 0; padding: 0; color: var(--text-dark); }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; position: relative; }

        /* P√ÑIS */
        .swed-header { background: white; border-bottom: 1px solid #ddd; padding: 10px 0; }
        .header-inner { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        .nav-main { display: flex; gap: 20px; font-size: 14px; font-weight: bold; }
        .nav-item { padding: 10px 0; cursor: pointer; color: #555; text-decoration: none; }
        .nav-item.active { color: #000; border-bottom: 3px solid var(--swed-orange); }

        /* SEADED (PEIDETUD) */
        .settings-link { position: absolute; left: 20px; top: -5px; color: #ccc; font-size: 11px; cursor: pointer; z-index: 100; }
        
        /* KAARDID JA TABELID */
        .card { background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 25px; }
        h1 { color: var(--swed-orange); font-size: 32px; margin: 10px 0; }
        h3 { color: var(--swed-orange); }
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab { padding: 8px 18px; border-radius: 20px; background: #eee; font-size: 14px; cursor: pointer; }
        .tab.active { background: var(--swed-yellow); font-weight: bold; }

        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; font-size: 13px; border-bottom: 2px solid var(--swed-orange); padding: 10px; }
        td { padding: 12px 10px; border-bottom: 1px solid #eee; font-size: 14px; }
        .val-right { text-align: right; }
        .positive { color: #588e00; font-weight: bold; }
        .negative { color: #d0021b; font-weight: bold; }
        .link { color: var(--link-blue); font-weight: bold; cursor: pointer; text-decoration: none; }

        /* LISASEKTSIOONID */
        .info-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 25px; margin-bottom: 40px; }
        .useful-box { background: #eef7f9; padding: 20px; border-radius: 8px; border-top: 4px solid var(--link-blue); }
        .trade-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; background: #fff; padding: 20px; border-radius: 12px; }

        /* JALUS */
        .swed-footer { background: white; padding: 60px 0 40px; border-top: 1px solid #eee; margin-top: 50px; }
        .footer-grid { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px; padding: 0 20px; }
        .footer-col h4 { color: #333; margin-bottom: 20px; }
        .footer-col ul { list-style: none; padding: 0; }
        .footer-col li { margin-bottom: 10px; color: var(--footer-text); font-size: 14px; cursor: pointer; }
        .footer-bottom { max-width: 1200px; margin: 40px auto 0; padding: 20px; border-top: 1px solid #eee; font-size: 12px; color: #999; }

        /* HALDUS */
        #adminPanel { display: none; background: #fff3e0; border: 2px dashed var(--swed-orange); padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .admin-active #adminPanel { display: block; }
        .delete-btn { display: none; color: red; font-size: 10px; margin-left: 8px; cursor: pointer; }
        .admin-active .delete-btn { display: inline; }
    </style>
</head>
<body>

<div class="swed-header">
    <div class="header-inner">
        <img src="https://www.swedbank.ee/static/stylebook/swedbank_logo.png" alt="Logo" style="height:40px;">
        <div class="nav-main">
            <span class="nav-item">Igap√§evapangandus</span>
            <span class="nav-item">Kaardid</span>
            <span class="nav-item active">Kogumine, investeerimine</span>
            <span class="nav-item">Pension</span>
        </div>
        <div style="font-size:13px;">üë§ Orm Saaresalu | V√§ljun ‚û°</div>
    </div>
</div>

<div class="container" id="mainContainer">
    <div class="settings-link" onclick="toggleAdmin()">‚öôÔ∏è Seaded</div>
    
    <div class="breadcrumb" style="font-size: 12px; color: #666; margin: 15px 0;">Avaleht > Kogumine, investeerimine > <strong>Minu portfell</strong></div>
    <h1>Minu portfell</h1>

    <div id="adminPanel">
        <h4>Halda portfelli</h4>
        <input type="text" id="inName" placeholder="Nimi">
        <select id="inType"><option value="Fondid">Fondid</option><option value="Aktsiad">Aktsiad</option></select>
        <input type="number" id="inQty" placeholder="Kogus">
        <input type="number" id="inPrice" placeholder="Hind">
        <button onclick="addItem()" style="background:var(--swed-orange); color:white; border:none; padding:8px 15px; border-radius:4px;">Lisa rida</button>
        <button onclick="toggleAdmin()" style="margin-left:10px;">Sulge seaded</button>
    </div>

    <div class="card">
        <div class="tabs">
            <div class="tab active">Investeeringud</div>
            <div class="tab">Arvelduskontod</div>
            <div class="tab">Pension</div>
        </div>

        <div style="display: flex; justify-content: space-between; gap: 40px;">
            <div style="flex: 1;">
                <h3>Portfelli √ºlevaade</h3>
                <table>
                    <thead>
                        <tr><th>Vara liik</th><th class="val-right">Kasum</th><th class="val-right">V√§√§rtus (EUR)</th></tr>
                    </thead>
                    <tbody id="overviewBody"></tbody>
                </table>
            </div>
            <div style="width: 250px;"><canvas id="portfolioChart"></canvas></div>
        </div>
    </div>

    <div class="card">
        <h3>Investeerimine: <span class="link" style="color:var(--swed-orange)">Minu investeering</span> ‚úèÔ∏è</h3>
        <table>
            <thead>
                <tr><th>V√§√§rtpaber</th><th class="val-right">Saldo</th><th class="val-right">Hind</th><th class="val-right">Kasum</th><th class="val-right">V√§√§rtus</th></tr>
            </thead>
            <tbody id="detailBody"></tbody>
        </table>
    </div>

    <div class="info-grid">
        <div>
            <h3>Hea teada!</h3>
            <div style="background:white; border-radius:8px; padding:1px 20px;">
                <p><strong>Maksustamine</strong> ‚ñæ</p>
                <p><strong>Lepingud ja √µigusalane teave</strong> ‚ñæ</p>
            </div>
        </div>
        <div class="useful-box">
            <h4>Kasulikku</h4>
            <ul style="list-style:none; padding:0; font-size:14px; color:var(--link-blue); line-height:2;">
                <li>‚ñ∂ Sobivusk√ºsimustik</li>
                <li>‚ñ∂ Ava uus konto investeerimiseks</li>
                <li>‚ñ∂ V√§√§rtpaberikonto v√§ljav√µte</li>
            </ul>
        </div>
    </div>

    <div class="trade-grid">
        <div>
            <h4 style="color:var(--swed-orange)">Enim kaubeldud: Fondid</h4>
            <ul style="font-size:13px; line-height:1.8;">
                <li>‚úÖ Swedbank Robur Technology</li>
                <li>‚úÖ Swedbank Robur Access Edge Global</li>
            </ul>
        </div>
        <div>
            <h4 style="color:var(--swed-orange)">Enim kaubeldud: Aktsiad</h4>
            <ul style="font-size:13px; line-height:1.8;">
                <li>‚úÖ Tesla</li>
                <li>‚úÖ Nvidia</li>
                <li>‚úÖ Ignitis</li>
            </ul>
        </div>
    </div>
</div>

<footer class="swed-footer">
    <div class="footer-grid">
        <div class="footer-col">
            <h4>Kontaktid</h4>
            <ul><li>Kontaktid, esindused</li><li>Aja broneerimine</li><li>Swedbankist</li></ul>
        </div>
        <div class="footer-col">
            <h4>Kasulikud lingid</h4>
            <ul><li>Turvalised rahaasjad</li><li>Kalkulaatorid</li><li>Hinnad ja kursid</li></ul>
        </div>
        <div class="footer-col">
            <h4>Juriidiline info</h4>
            <ul><li>Pangatingimused</li><li>Andmete t√∂√∂tlemine</li><li>Kaebuste lahendamine</li></ul>
        </div>
        <div class="footer-col">
            <h4>Kliendiprogrammid</h4>
            <ul><li>Kuldklient</li><li>Privaatpangandus</li><li>Noortele ja tudengile</li></ul>
        </div>
    </div>
    <div class="footer-bottom">
        <p>¬© Swedbank AS, Liivalaia 34, 15040 Tallinn. Reg. number: 10060701. Swedbanki sotsiaalmeedia: FB | IG | YT</p>
        <p style="font-size:10px; margin-top:10px;">Olete finantsteenuseid pakkuvate ettev√µtete kodulehel. Enne lepingu s√µlmimist tutvuge teenuse tingimustega.</p>
    </div>
</footer>

<script>
    let assets = JSON.parse(localStorage.getItem('swed_v4')) || [
        { name: 'SWEDBANK ROBUR ACCESS EDGE GLOBAL C', type: 'Fondid', qty: 1.4609, price: 16.7561, profit: 4.48 }
    ];
    let myChart = null;
    function toggleAdmin() { document.getElementById('mainContainer').classList.toggle('admin-active'); }
    
    function render() {
        const dBody = document.getElementById('detailBody');
        const oBody = document.getElementById('overviewBody');
        dBody.innerHTML = ''; oBody.innerHTML = '';
        let groups = { Fondid: [], Aktsiad: [] }, totalV = 0, totalP = 0;

        assets.forEach((item, i) => { 
            groups[item.type].push({...item, idx: i}); 
            totalV += (item.qty * item.price); totalP += item.profit;
        });

        Object.keys(groups).forEach(type => {
            if (groups[type].length === 0) return;
            dBody.innerHTML += `<tr style="background:#f9f2f0; font-weight:bold;"><td colspan="5">${type}</td></tr>`;
            let gV = 0, gP = 0;
            groups[type].forEach(item => {
                let v = item.qty * item.price; gV += v; gP += item.profit;
                dBody.innerHTML += `<tr><td>${item.name} <span class="delete-btn" onclick="del(${item.idx})">[Kustuta]</span></td><td class="val-right">${item.qty}</td><td class="val-right">${item.price} EUR</td><td class="val-right positive">${item.profit} EUR</td><td class="val-right">${v.toFixed(2)} EUR</td></tr>`;
            });
            oBody.innerHTML += `<tr><td>${type}</td><td class="val-right positive">${gP.toFixed(2)} EUR</td><td class="val-right">${gV.toFixed(2)}</td></tr>`;
        });
        
        updateChart(groups);
        localStorage.setItem('swed_v4', JSON.stringify(assets));
    }

    function addItem() {
        assets.push({ name: document.getElementById('inName').value.toUpperCase(), type: document.getElementById('inType').value, qty: parseFloat(document.getElementById('inQty').value), price: parseFloat(document.getElementById('inPrice').value), profit: 0 });
        render();
    }
    function del(i) { if(confirm('Kustutada?')) { assets.splice(i, 1); render(); } }

    function updateChart(g) {
        const ctx = document.getElementById('portfolioChart').getContext('2d');
        const fV = g.Fondid.reduce((s, i) => s + (i.qty * i.price), 0);
        const aV = g.Aktsiad.reduce((s, i) => s + (i.qty * i.price), 0);
        if (myChart) myChart.destroy();
        myChart = new Chart(ctx, { type: 'doughnut', data: { datasets: [{ data: [fV, aV], backgroundColor: ['#ee7023', '#00768e'] }] }, options: { cutout: '70%' } });
    }
    render();
</script>
</body>
</html>
